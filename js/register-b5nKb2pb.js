var P=(p,r,n)=>new Promise((l,t)=>{var i=s=>{try{c(n.next(s))}catch(m){t(m)}},u=s=>{try{c(n.throw(s))}catch(m){t(m)}},c=s=>s.done?l(s.value):Promise.resolve(s.value).then(i,u);c((n=n.apply(p,r)).next())});import{c as k,u as y,T as V,e as B,$ as e,s as g,g as N}from"./bootstrap-gbaUEZyS.js";import{a3 as S,W as x,J as _,ad as $,aj as A,m as b,af as w,ag as T,a9 as o,aZ as F,ao as v,ap as f,aA as d,P as R,ae as I,b as C}from"../jse/index-index-Cu888Fo9.js";const L={class:"mt-4 text-center text-sm"},q=S({name:"RegisterForm",__name:"register",props:{formSchema:{default:()=>[]},loading:{type:Boolean,default:!1},loginPath:{default:"/auth/login"},title:{default:""},subTitle:{default:""},submitButtonText:{default:""}},emits:["submit"],setup(p,{emit:r}){const n=p,l=r,[t,{validate:i,getValues:u}]=k(x({commonConfig:{hideLabel:!0,hideRequiredMark:!0},schema:_(()=>n.formSchema),showDefaultActions:!1})),c=y();function s(){return P(this,null,function*(){const{valid:a}=yield i(),h=yield u();a&&l("submit",h)})}function m(){c.push(n.loginPath)}return(a,h)=>($(),A("div",null,[b(V,null,{desc:w(()=>[T(a.$slots,"subTitle",{},()=>[f(d(a.subTitle||o(e)("authentication.signUpSubtitle")),1)])]),default:w(()=>[T(a.$slots,"title",{},()=>[f(d(a.title||o(e)("authentication.createAnAccount"))+" ðŸš€ ",1)])]),_:3}),b(o(t)),b(o(B),{class:F([{"cursor-wait":a.loading},"mt-2 w-full"]),loading:a.loading,"aria-label":"register",onClick:s},{default:w(()=>[T(a.$slots,"submitButtonText",{},()=>[f(d(a.submitButtonText||o(e)("authentication.signUp")),1)])]),_:3},8,["class","loading"]),v("div",L,[f(d(o(e)("authentication.alreadyHaveAccount"))+" ",1),v("span",{class:"vben-link text-sm font-normal",onClick:h[0]||(h[0]=D=>m())},d(o(e)("authentication.goToLogin")),1)])]))}}),E=S({name:"Register",__name:"register",setup(p){const r=R(!1),n=_(()=>[{component:"VbenInput",componentProps:{placeholder:e("authentication.usernameTip")},fieldName:"username",label:e("authentication.username"),rules:g().min(1,{message:e("authentication.usernameTip")})},{component:"VbenInputPassword",componentProps:{passwordStrength:!0,placeholder:e("authentication.password")},fieldName:"password",label:e("authentication.password"),renderComponentContent(){return{strengthText:()=>e("authentication.passwordStrength")}},rules:g().min(1,{message:e("authentication.passwordTip")})},{component:"VbenInputPassword",componentProps:{placeholder:e("authentication.confirmPassword")},dependencies:{rules(t){const{password:i}=t;return g({required_error:e("authentication.passwordTip")}).min(1,{message:e("authentication.passwordTip")}).refine(u=>u===i,{message:e("authentication.confirmPasswordTip")})},triggerFields:["password"]},fieldName:"confirmPassword",label:e("authentication.confirmPassword")},{component:"VbenCheckbox",fieldName:"agreePolicy",renderComponentContent:()=>({default:()=>C("span",[e("authentication.agree"),C("a",{class:"vben-link ml-1 ",href:""},`${e("authentication.privacyPolicy")} & ${e("authentication.terms")}`)])}),rules:N().refine(t=>!!t,{message:e("authentication.agreeTip")})}]);function l(t){console.log("register submit:",t)}return(t,i)=>($(),I(o(q),{"form-schema":n.value,loading:r.value,onSubmit:l},null,8,["form-schema","loading"]))}});export{E as default};
